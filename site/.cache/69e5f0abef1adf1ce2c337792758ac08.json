{"dependencies":[],"generated":{"js":"const fs = window.require('fs');\r\nconst dl = window.require('ytdl-core');\r\nconst ipcRenderer = window.require('electron').ipcRenderer;\r\nconst clipboard = window.require('electron').clipboard\r\nconst remote = window.require('electron').remote;\r\nconst shell = window.require('electron').shell\r\nconst app = remote.app;\r\n\r\nconst downloads = document.getElementById('downloads');\r\nconst update = document.getElementById('update');\r\nconst nappi = document.getElementById('nappi');\r\nconst text = document.getElementById('text');\r\nconst exit = document.getElementById('exit');\r\nconst dir = app.getPath('videos') + '/LataaApp'\r\n\r\ntext.addEventListener('click', () => {\r\n    text.value = clipboard.readText();\r\n});\r\n\r\nnappi.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    if(!text.value) return swal(\"Error\", \"Linkki채 ei ole!\", \"error\");\r\n    dl.getInfo(text.value, (err, info) => {\r\n        if (err) return swal(\"Error\", \"En tunnista linkki채!\", \"error\");\r\n        if (!fs.existsSync(dir)){\r\n            fs.mkdirSync(dir);\r\n        }\r\n        const stream = dl(text.value, { quality: \"highestaudio\", format: \"mp3\" })\r\n            .pipe(fs.createWriteStream(dir + \"/\" + info.title + \".mp3\"))\r\n            \r\n        stream.on('finish', () => {\r\n            return swal(\"Valmis\", \"Video ladattu!\", \"success\");\r\n        });\r\n    })\r\n});\r\n\r\ndownloads.addEventListener('click', () => {\r\n    shell.showItemInFolder(dir)\r\n})\r\n\r\nexit.addEventListener('click', () => {\r\n    window.close()\r\n})\r\n\r\nupdate.addEventListener('click', () => {\r\n    ipcRenderer.send('quitAndInstall')\r\n})\r\n\r\nipcRenderer.on('log', function(event, text) {\r\n    console.log('[Electron Main]: ', text)\r\n})\r\n\r\nipcRenderer.on('updateReady', function(event, text) {\r\n    update.innerHTML = \"P채ivit채 App!\";\r\n})\r\n\r\ndocument.addEventListener(\"keydown\", function (e) {\r\n    if (e.which === 123) {\r\n        remote.getCurrentWindow().toggleDevTools();\r\n    } else if (e.which === 116) {\r\n        location.reload();\r\n    }\r\n});\r\n"},"hash":"2fca39882a7c5a512570929dec10a989"}